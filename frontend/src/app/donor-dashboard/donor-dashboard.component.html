<div class="dashboard-page">

  <!-- HEADER -->
  <div class="dashboard-header">
    <div>
      <h2>Donor Dashboard</h2>
      <p class="subtitle">
        Track your contributions and donation impact
      </p>
    </div>

    <button class="logout-btn" (click)="logout()">Logout</button>
  </div>

  <!-- STATS -->
  <div class="stats-container">
    <div class="stat-card total">
      <h3>Total Contributions</h3>
      <p>{{ stats.total }}</p>
    </div>

    <div class="stat-card pending">
      <h3>Pending Pickups</h3>
      <p>{{ stats.pending }}</p>
    </div>

    <div class="stat-card completed">
      <h3>Completed</h3>
      <p>{{ stats.completed }}</p>
    </div>
  </div>

  <!-- CHART -->
  <div class="chart-container" *ngIf="!loading && stats.total > 0">
    <h3>Contribution Overview</h3>
    <div class="chart-wrapper">
      <canvas id="donationChart"></canvas>
    </div>
  </div>

  <!-- TABLE -->
  <div class="table-container">
    <h3>Your Contributions</h3>

    <table *ngIf="!loading && contributions.length > 0">
      <thead>
        <tr>
          <th>Type</th>
          <th>Quantity</th>
          <th>Location</th>
          <th>Pickup Date</th>
          <th>Status</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let c of contributions">
          <td>{{ c.donation_type }}</td>

          <!-- âœ… FIXED HERE -->
          <td>{{ c.quantity }}</td>

          <td>{{ c.location }}</td>
          <td>{{ c.pickup_date_time | date:'medium' }}</td>

          <td>
            <span
              class="status-badge"
              [ngClass]="{
                pending: c.status !== 'COMPLETED',
                completed: c.status === 'COMPLETED'
              }"
            >
              {{ c.status }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>

    <p class="empty" *ngIf="!loading && contributions.length === 0">
      You have not made any contributions yet.
    </p>
  </div>

</div>